import{d as H,r as n,ah as J,e as Q,ai as W,b as X,y as z,aj as x,t as a,a1 as d,E as g,g as Y,ak as Z,i as C,j as A,k as o,m as w,l as s,v as i,A as f,F as ee,al as te,B as I,M as ae,ad as R,af as se,am as oe,ac as ne,q as ie,s as re,_ as le}from"./index-a68aaa53.js";import{N as de}from"./Result-5c12868b.js";const ce=v=>(ie("data-v-acf79da0"),v=v(),re(),v),ue={class:"container_dashboard"},me={class:"header_dashboard"},ge={class:"flex gap-2 justify-end items-center"},fe={class:"flex gap-2 items-center"},ve={class:"hidden md:block"},pe={class:"flex gap-2 items-center"},ye={class:"hidden md:block"},he={class:"cursor-pointer"},_e={class:""},ke={key:0,class:"border-red-400 bg-red-100 p-4 rounded-lg"},be=ce(()=>o("div",null,null,-1)),D=3,xe=H({__name:"index",setup(v){const{iconRender:S}=te(),F=n(!1),N=n(!1),c=n(!0),l=n(!1),r=J(),u=n([]),{isMobile:h}=Q(),T=W(),m=X(),M=n(null),B=z(()=>r.listUniversity),E=z(()=>r.countTotalData),p=x({page:E,pageSize:D,showSizePicker:!0,onChange:e=>{p.page=e},onUpdatePageSize:e=>{p.pageSize=e,p.page=1}});function P(e){const t=T.warning({title:a("chat.deleteConfirmation"),content:a("chat.deleteConfirmationMessage"),positiveText:a("common.yes"),negativeText:a("common.no"),onPositiveClick:async()=>{try{t.loading=!0,await r.deleteUniversityAction(e.id),m.success(a("chat.deleteSuccess"))}catch{t.loading=!1,m.error(a("chat.deleteFailed"))}finally{t.loading=!1}}})}async function O(e){r.showModelUpdate=!0,M.value=e}const _=x({title:a("university.university"),key:"university",render(e){return d(CardUnversity,{row:e})}}),k=x([{type:"selection",options:["all","none"],disabled(e){return e.type_added==="default"}},_,{title:a("research.actions"),key:"actions",align:"center",width:100,render(e){return d("div",{class:"flex gap-1"},[d(g,{strong:!0,tertiary:!0,size:"small",loading:N.value,style:"border-radius:100%",onClick:async()=>{try{await O(e)}catch(t){console.error(a("common.updateFailed"),t.message)}}},{default:()=>d(S({icon:"fluent:edit-32-regular",color:"blue"}))}),d(g,{strong:!0,tertiary:!0,size:"small",loading:F.value,onClick:()=>P(e)},{default:()=>d(S({icon:"fluent:delete-32-regular",color:"red"}))})])}}]);async function U(){try{await r.fetchUniversitiesAction({limit:D,offset:1}),c.value=!0,c.value=!1,l.value=!1}catch(e){m.error(a("common.errorSomeThing")+" "+e.message),console.error(a("common.errorSomeThing"),e.message),console.error(l.value),l.value=!0,console.error(l.value),c.value=!1}}Y(async()=>{U()});const V=n(null);function K(e,t){_.filterOptionValue=e[t.key]}const j=n(k);function $(e){j.value.forEach(t=>{if(t.sortOrder!==void 0){if(!e){t.sortOrder=!1;return}t.key===e.columnKey?t.sortOrder=e.order:t.sortOrder=!1}})}const q=e=>e.id;function L(e){u.value=e}function G(){const e=T.warning({title:a("chat.deleteConfirmation"),content:a("chat.deleteConfirmationMessage"),positiveText:a("common.yes"),negativeText:a("common.no"),onPositiveClick:async()=>{try{e.loading=!0;const t=u.value.map(y=>r.deleteUniversityAction(y));await Promise.all(t),m.success(a("chat.deleteSuccess"))}catch(t){console.error(a("common.deleteFailed"),t.message),m.error(a("common.deleteFailed"))}finally{e.loading=!1}}})}return(e,t)=>{const y=Z("FilterTable");return C(),A(ee,null,[o("div",ue,[o("div",me,w(s(a)("university.universitys")),1),o("div",ge,[i(s(g),{onClick:t[0]||(t[0]=b=>s(r).showModelAdd=!0),type:"primary"},{default:f(()=>[o("div",fe,[i(s(I),{icon:"mdi:add-bold",class:"text-base"}),o("div",ve,w(s(a)("university.addUniversity")),1)])]),_:1}),i(s(g),{strong:"",secondary:"",type:"error",disabled:!(u.value.length>0),onClick:G},{default:f(()=>[o("div",pe,[i(s(I),{icon:"fluent:delete-32-regular",class:"text-base"}),o("div",ye,w(s(a)("common.delete")),1)])]),_:1},8,["disabled"]),o("div",he,[i(y,{mainColumn:_,columns:k},null,8,["mainColumn","columns"])])]),o("div",_e,[i(s(ne),{vertical:"",size:12},{default:f(()=>[l.value?(C(),A("div",ke,[i(s(de),{status:"error",title:"Error",description:"It's red"},{footer:f(()=>[i(s(g),{size:"small",loading:c.value,onClick:t[1]||(t[1]=b=>U())},{default:f(()=>[ae(" try Again ")]),_:1},8,["loading"])]),_:1})])):R("",!0),l.value?R("",!0):(C(),se(s(oe),{key:1,remote:"",size:(s(h),"small"),striped:"",loading:c.value,ref_key:"dataTableInst",ref:V,columns:k,data:B.value,pagination:p,"max-height":s(h)?400:370,"min-height":s(h)?380:370,"paginate-single-page":!1,"checked-row-keys":u.value,"onUpdate:checkedRowKeys":[t[2]||(t[2]=b=>u.value=b),L],"onUpdate:filters":K,"onUpdate:sorter":$,"row-key":q},null,8,["size","loading","columns","data","pagination","max-height","min-height","checked-row-keys"]))]),_:1})])]),be],64)}}});const Te=le(xe,[["__scopeId","data-v-acf79da0"]]);export{Te as default};
